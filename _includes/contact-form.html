<!-- Contact Form with Formspree Integration -->
<form action="{{ site.data.contact.formspree_endpoint }}" 
      method="POST" 
      class="contact-form"
      id="contactForm">
  
  <!-- Name Field -->
  <div class="form-group">
    <label for="name" class="required">Name</label>
    <input type="text" 
           id="name" 
           name="name" 
           required
           placeholder="Your full name"
           aria-required="true">
  </div>

  <!-- Email Field -->
  <div class="form-group">
    <label for="email" class="required">Email</label>
    <input type="email" 
           id="email" 
           name="email" 
           required
           placeholder="your.email@example.com"
           aria-required="true">
  </div>

  <!-- Inquiry Type -->
  <div class="form-group">
    <label for="inquiry_type">Inquiry Type</label>
    <select id="inquiry_type" name="inquiry_type">
      {% for type in site.data.contact.inquiry_types %}
      <option value="{{ type.value }}">{{ type.label }}</option>
      {% endfor %}
    </select>
  </div>

  <!-- Message Field -->
  <div class="form-group">
    <label for="message" class="required">Message</label>
    <textarea id="message" 
              name="message" 
              rows="6" 
              required
              placeholder="Please provide details about your inquiry..."
              aria-required="true"></textarea>
  </div>

  <!-- Honeypot field for spam protection (hidden from users) -->
  <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off">

  <!-- Hidden fields for Formspree configuration -->
  <input type="hidden" name="_subject" value="New contact form submission">
  <input type="hidden" name="_next" value="{{ site.url }}/contact/#thank-you">

  <!-- Submit Button -->
  <div class="form-group">
    <button type="submit" class="btn btn-primary">
      Send Message
    </button>
  </div>

  <!-- Form Status Messages -->
  <div id="formStatus" class="form-status" role="alert" aria-live="polite"></div>
</form>

<!-- Thank You Message (shown after successful submission) -->
<div id="thank-you" class="thank-you-message" style="display: none;">
  <h3>âœ… Thank you for your message!</h3>
  <p>I've received your inquiry and will respond as soon as possible.</p>
  <p><em>{{ site.data.contact.response_time }}</em></p>
  <button onclick="window.location.reload()" class="btn btn-secondary">
    Send Another Message
  </button>
</div>

<style>
  .contact-form {
    max-width: 600px;
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: var(--text-primary, #212529);
  }

  .form-group label.required::after {
    content: " *";
    color: var(--color-danger, #dc3545);
  }

  .form-group input,
  .form-group select,
  .form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--border-color, #dee2e6);
    border-radius: 4px;
    font-size: 1rem;
    font-family: inherit;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

  .form-group input:focus,
  .form-group select:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--color-primary, #0066cc);
    box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
  }

  .form-group textarea {
    resize: vertical;
    min-height: 120px;
  }

  .btn {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 4px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .btn-primary {
    background-color: var(--color-primary, #0066cc);
    color: white;
  }

  .btn-primary:hover {
    background-color: var(--color-primary-dark, #004499);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .btn-secondary {
    background-color: var(--bg-secondary, #6c757d);
    color: white;
  }

  .btn-secondary:hover {
    background-color: #5a6268;
  }

  .form-status {
    margin-top: 1rem;
    padding: 1rem;
    border-radius: 4px;
    display: none;
  }

  .form-status.success {
    display: block;
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
  }

  .form-status.error {
    display: block;
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
  }

  .thank-you-message {
    padding: 2rem;
    background: #d4edda;
    border: 2px solid #c3e6cb;
    border-radius: 8px;
    text-align: center;
  }

  .thank-you-message h3 {
    color: #155724;
    margin-bottom: 1rem;
  }

  /* Mobile Optimization */
  @media (max-width: 768px) {
    .form-group input,
    .form-group select,
    .form-group textarea {
      font-size: 16px; /* Prevents zoom on iOS */
    }

    .btn {
      width: 100%;
    }
  }
</style>

<script>
  // Show thank you message if redirected after successful submission
  if (window.location.hash === '#thank-you') {
    document.getElementById('contactForm').style.display = 'none';
    document.getElementById('thank-you').style.display = 'block';
  }

  // Optional: Enhanced form validation and submission handling
  document.getElementById('contactForm').addEventListener('submit', function(e) {
    const formStatus = document.getElementById('formStatus');
    formStatus.textContent = 'Sending message...';
    formStatus.className = 'form-status';
    formStatus.style.display = 'block';
  });
</script>
